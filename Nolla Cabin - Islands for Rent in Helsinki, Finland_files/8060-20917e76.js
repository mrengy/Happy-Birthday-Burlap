(window.webpackJsonp=window.webpackJsonp||[]).push([["8060"],{"1qfh":function(e,t,n){"use strict";e.exports=function(e){return e.name}},"2jR3":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l}));var a=n("vkc8"),i=n("js+0"),o=n("Ri7V");Error;function r(e){return e?{extra:e.extra,tags:e.tags,fingerprint:e.fingerprint}:{}}function s(e){return e instanceof Error}function c(e,t){Object(a.b)()?Object(a.a)().then((function(n){return n.captureException(e,r(t))})):t?console.error(e,JSON.stringify(t)):console.error(e),o.a.getBootstrap("pineapple.errors.jitney.enable_throw_without_breaking")&&Object(i.a)(e,"error",null==t?void 0:t.fingerprint)}function u(e,t){if(Object(a.b)())Object(a.a)().then((function(n){var a=r(t);if(s(e))n.captureException(e,Object.assign({level:"warning"},a));else if("object"===babelHelpers.typeof(e)){var i=e&&e.message;i=i?"Invalid usage of warn: ".concat(i):"Invalid usage of warn with object",c(new Error(i),Object.assign(Object.assign({},a),{},{extra:Object.assign(Object.assign({},a.extra||{}),e)}))}else n.captureMessage(String(e),Object.assign({level:"warning"},a))}));else if(t){if(!s(e)&&"object"===babelHelpers.typeof(e))throw new Error("warn does not support an object.");console.warn(e,t)}else{if(!s(e)&&"object"===babelHelpers.typeof(e))throw new Error("warn does not support an object.");console.warn(e)}o.a.getBootstrap("pineapple.errors.jitney.enable_warn")&&Object(i.a)(e,"warning",null==t?void 0:t.fingerprint)}function l(e,t){Object(a.b)()?Object(a.a)().then((function(n){return n.captureMessage(String(e),Object.assign({level:"info"},r(t)))})):t?console.info(e,t):console.info(e),o.a.getBootstrap("pineapple.errors.jitney.enable_info")&&Object(i.a)(e,"info",null==t?void 0:t.fingerprint)}},"2nyj":function(e,t,n){"use strict";e.exports=Object.values},"3ZsZ":function(e,t,n){"use strict";e.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"3sVq":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=[];function i(e,t){return a}},"64m5":function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return l}));var a=n("8dvS"),i=n.n(a),o=n("Q/Zp");n.d(t,"b",(function(){return o.a}));var r={small:1,medium:2,large:3,xlarge:4},s={1:"small",2:"medium",3:"large",4:"xlarge"};function c(e){return r[e]}function u(e){return s[e]}function l(e){i()("cbkp")!==e&&i()("cbkp",e,{domain:Object(o.a)(),path:"/",expires:999})}},ANar:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var a=n("T4Uw"),i=n.n(a),o=n("g8Fj"),r=n("rDjx"),s=(n("2jR3"),function(){function e(){}return e.bump=function(){o.a.airdogBump.apply(o.a,arguments)},e.logEvent=function(e){o.a.logAirdogEvent(e)},e}());function c(e){var t,n,a,o,s="hyperloop"===(null===(t=i.a.get("layout-init"))||void 0===t||null===(n=t.tracking_context)||void 0===n?void 0:n.source),c=null===(a=i.a.get("layout-init"))||void 0===a||null===(o=a.tracking_context)||void 0===o?void 0:o.controller,u=s?c||"unknown":"monorail",l="/_/".concat(s&&c||"core-guest-loop","/tracking/airdog"),d=[];if(void 0!==e.tags)if("string"==typeof e.tags)d=e.tags.split(",");else if(Array.isArray(e.tags)){var g;(g=d).push.apply(g,babelHelpers.toConsumableArray(e.tags))}else d=Object.entries(e.tags).map((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],a=t[1];return"".concat(n,":").concat(a)}));d.push("loop:".concat(u),"host:".concat(window.location&&window.location.host?window.location.host.replace(":","-"):"unknown"),"js_env:".concat("browser"));var f=[].concat(babelHelpers.toConsumableArray(d),["protocol:http"]);Object(r.a)(l,Object.assign(Object.assign({},e),{},{tags:f}))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i={type:"count",metric:e,value:t,tags:n};a?i.dropTestingPrefix=!0:o.a.airdogBump(e,t,n),c(i)}function l(e,t,n){c({type:"distribution",metric:e,value:t,tags:n})}},CBMP:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("Qyje"),i=n.n(a);function o(e){var t=i.a.parse(window.location.search.slice(1));t.euid&&e.logEvent({event_name:"email_referred_page_load",event_data:{channel:"email",rookery_uuid:t.euid,rookery_link_uuid:t.eluid,url:window.location.href}})}},HYLM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("tl9J"),i=n.n(a),o=n("Qu9w"),r=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e,this.initialized=!1,this.initializers=[],e.logger&&this.setLogger(e.logger)}var t=e.prototype;return t.setLogger=function(e){this._logger=new o.a(e)},t.getLogger=function(){if(null==this._logger)throw new Error("[tracking-js] Please provide a logger config, either in the constructor or using `setLogger()`.");return this._logger},t.init=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=Object.assign(this.options,t),this.initializers.forEach((function(t){return t(e.options)})),this.initialized=!0,this.initializers=[],this.addInitHook((function(){return e.getLogger().flushEventQueue()}))},t.addInitHook=function(e){this.initialized?e(this.options):this.initializers.push(e)},t.setUiRef=function(e,t){i()("uiReferrer",e),t&&(window.location.href=t.getAttribute("href"))},t.getUiRef=function(){var e=i()("uiReferrer");return e&&i()("uiReferrer",null),e},t.clearContext=function(){this.getLogger().clearContext()},t.addContext=function(e){this.getLogger().addContext(e)},t.addDefaultContext=function(){this.getLogger().addDefaultContext()},t.onPageURIChange=function(e){this.getLogger().onPageURIChange(e)},t.airdogBump=function(e,t,n,a){this.getLogger().airdogBump(e,t,n,a)},t.logAirdogEvent=function(e){this.getLogger().logAirdogEvent(e)},t.logEvent=function(e){this.getLogger().logEvent(e)},t.deprecatedLogAirEvent=function(e){this.getLogger().logEvent(e)},t.logJitneyEvent=function(e){this.getLogger().logJitneyEvent(e)},t.queueEvent=function(e){this.getLogger().queueEvent(e)},t.queueJitneyEvent=function(e){this.getLogger().queueJitneyEvent(e)},t.setImpressionMetadata=function(e){this.getLogger().setImpressionMetadata(e)},t.logDebugEvent=function(e){this.getLogger().logEphemeralDebugEvent(e)},t.logUniversalSessionStartEvent=function(e){return this.getLogger().logUniversalSessionStartEvent(e)},t.logUniversalSessionEndEvent=function(e){return this.getLogger().logUniversalSessionEndEvent(e)},e}()},"Q/Zp":function(e,t,n){"use strict";function a(){for(var e=window.location.hostname,t=e.split("."),n=t.length,a=["airbnb","airbnbchina","luxuryretreats","airbnb-dev"],i=0;i<a.length;i+=1){var o=t.indexOf(a[i]);if(o>=0)return".".concat(t.slice(o,n).join("."))}return e}n.d(t,"a",(function(){return a}))},Qu9w:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return q}));var a=n("cVPA"),i=n.n(a),o=n("Qyje"),r=n.n(o),s=n("jiDy"),c=n("Zi2E"),u=n("gMDI"),l=n("sl/x"),d=n("Y195"),g=n("gLlq"),f=n("mTIE"),v=n("sS9z"),h=n("Fxmg"),p=n("XXhB"),b=n("GtZL"),m=n("tl9J"),_=n.n(m),w=n("xk4V"),y=n.n(w),j=n("tkLd"),E=n("3sVq"),O=n("ptWw"),k=n("RMaf"),x=n("Ri7V"),C="tracking_event_queue",S="".concat("tab-tracking","-tabId"),I="".concat("tab-tracking","-ancestorTabs"),L=[b.a.CheckoutHome,b.a.PdpHomeMarketplace,b.a.PdpHomeSelect,b.a.PdpHomeLuxury,b.a.PdpHotel,b.a.PdpHomeChinaMarketplace];var P=null;function T(e){if(!e.event_name)throw new Error("event_name is a required key for logEvent")}function A(e){return"com.airbnb.jitney.event.logging.Universal:UniversalComponentActionEvent:2.0.0"!==e.schema&&"com.airbnb.jitney.event.logging.Universal:UniversalComponentImpressionEvent:2.0.0"!==e.schema&&"com.airbnb.jitney.event.logging.Universal:UniversalPageImpressionEvent:1.0.0"!==e.schema&&"com.airbnb.jitney.event.logging.Performance:NativeMeasurementEvent:2.0.0"!==e.schema&&"com.airbnb.jitney.event.logging.Performance:PerformanceWebPageMetricsEvent:1.0.0"!==e.schema&&"com.airbnb.jitney.event.logging.Universal:UniversalPageResolutionEvent:1.0.0"!==e.schema||!e.event_data.event_data_schema?e:Object.assign(Object.assign({},e),{},{event_data:Object.assign(Object.assign({},e.event_data),{},{event_data:JSON.stringify(e.event_data.event_data),event_data_schema:e.event_data.event_data_schema.fullyQualifiedName||"unknown"})})}function N(e){Object(j.c)("Failed to log event (event=".concat(e.event_name,")"))}var q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.logContext={},"function"!=typeof e.request)throw new Error("[tracking-js] EventLogger requires a `request` option to be passed in that is a function");this.request=e.request,this.setupTrackingDebounce(),this.debounceLogEvents=!!e.debounceLogEvents,this.autoBatchLogEvents=!!e.autoBatchLogEvents,this.scheduleFlushQueue=this.scheduleFlushQueue.bind(this),this.flushEventQueue=this.flushEventQueue.bind(this),this.shouldAutoQueueEvent=this.shouldAutoQueueEvent.bind(this),this.closeAllActiveSessions=this.closeAllActiveSessions.bind(this),this.pageURIChangeCallbacks=[],this.BATCH_SIZE_LIMIT=95e3,this.isUnloading=!1,this.batchedIdleTimeoutId=0,this.hasAddedFlushQueueEventHandlers=!1,this.pageEventDataSchema=null,this.pageEventData={},this.bootstrappedPageEventData={},this.stringifiedPageEventData="",this.appLoggingContext={active_sessions:[],web_tab_uuid:null},window.addEventListener&&window.addEventListener("beforeunload",this.closeAllActiveSessions,{once:!0})}var n=t.prototype;return n.setupTrackingDebounce=function(){var t,n,a=this,i=[],o=(t=function(e){var t=e.map((function(e){return e.data})),n=e.map((function(e){return e.callback}));i=[],a.sendTrackingRequest(t,(function(e,t){n.filter(Boolean).forEach((function(n){return n(e,t)}))}))},function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];e.cancelIdleCallback(n),n=e.requestIdleCallback((function(){n=null,t.apply(void 0,i)}))});this.sendTrackingRequestDebounced=function(e,t){if(t&&"function"!=typeof t)throw new Error("Callback provided was not of type function");i=[].concat(babelHelpers.toConsumableArray(i),[{data:e,callback:t}]),o(i)}},n.clearContext=function(){this.logContext={}},n.addContext=function(e){var t=e;t&&0===t.user_id&&(t=Object.assign(Object.assign({},t),{},{user_id:null})),Object.assign(this.logContext,t)},n.addDefaultContext=function(){var e=this.getCookies();this.updateDynamicContext();var t=r.a.parse(window.location.search.slice(1)),n=t.af,a=void 0===n?null:n,o=t.c,s=void 0===o?null:o,c=a||e.affiliate,u=s||e.campaign;c&&this.addContext({affiliate:c}),u&&this.addContext({campaign:u}),this.maybeAddCookie(e,"bev"),this.maybeAddCookie(e,"bev","visitor_id");var l=i.a.locale();l&&this.addContext({locale:l,language:l.split("-")[0]})},n.onPageURIChange=function(e){var t=this;this.pageURIChangeCallbacks.push(e);var n=!0;return function(){if(n){n=!1;var a=t.pageURIChangeCallbacks.indexOf(e);t.pageURIChangeCallbacks.splice(a,1)}}},n.updateDynamicContext=function(){if(document.location){var e=!1;this.logContext.page_uri!==document.location.pathname&&(e=null!=(P=this.logContext.page_uri)),this.addContext({page_uri:document.location.pathname,page_referrer:P||document.referrer}),e&&this.pageURIChangeCallbacks.forEach((function(e){return e()}))}},n.shouldAutoQueueEvent=function(){return this.autoBatchLogEvents&&!this.isUnloading},n.logEvent=function(e){if(this.shouldAutoQueueEvent()||e.queue)this.queueEvent(e);else{T(e);var t=this.formatEventData(e);!1!==e.debounce&&(e.debounce||this.debounceLogEvents)?this.sendTrackingRequestDebounced(t,e.callback):this.sendTrackingRequest(t,e.callback,{useSendBeacon:!!e.use_send_beacon})}},n.scheduleFlushQueue=function(){var t=this;this.batchedIdleTimeoutId||(this.batchedIdleTimeoutId=e.requestIdleCallback(this.flushEventQueue,{timeout:5e3})),this.hasAddedFlushQueueEventHandlers||(this.hasAddedFlushQueueEventHandlers=!0,window.addEventListener("unload",(function(){t.isUnloading=!0,t.flushEventQueue({useSendBeacon:!0})})),window.addEventListener("visibilitychange",(function(){t.isUnloading=!0,t.flushEventQueue({useSendBeacon:!0})})),this.onPageURIChange(this.scheduleFlushQueue))},n.queueEvent=function(e){T(e);var t=this.formatEventData(e);try{var n=_()(C)||[];n.push(t),_()(C,n,{expires:6e4})}catch(e){Object(j.c)("Could not add event to queue: ".concat(e))}this.autoBatchLogEvents&&this.scheduleFlushQueue()},n.logJitneyEvent=function(e){var t=this,n=e.schema,a=e.event_data,i=e.queue,o=e.use_send_beacon;if(!n||!n.defaultProps||!n.defaultProps.schema)throw new TypeError("Need to pass schema object from airbnb-jitney-schemas");var r=n.defaultProps.schema;(n.fullyQualifiedName!==p.a.fullyQualifiedName||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debug_event_name,n=e.owner_email_address,a=e.stop_publishing_ds;if(!n||"OMITTED_IN_JS"!==n)return console.error("invalid owner email address ".concat(n," for ").concat(t,", please use the Tracking.logDebugEvent method to emit a debug event.")),!1;var i=new Date(a);return a&&a.match(/\d{4}-\d{2}-\d{2}/)&&!Number.isNaN(i)?!(i<new Date)||(console.error("expired ephemeral debug event ".concat(t," no longer being emitted, please remove the producer code!")),!1):(console.error("invalid stop publishing date ".concat(a," for ").concat(t,", must be a valid date in the format YYYY-mm-DD. Please make this a static value. Do not do something like current date + 1 month :(")),!1)}(a))&&this.logEvent({event_name:"jitney_".concat(n.defaultProps.event_name),post_process:function(e){var o,v=Object(O.a)(e,n,a);if(v.schema=r,void 0!==window.navigator&&(v.event_data.context.user_agent=window.navigator.userAgent),n.fullyQualifiedName===c.a.fullyQualifiedName&&L.includes(v.event_data.context.page_name)&&(v.event_data.app_logging_context=t.appLoggingContext),n.fullyQualifiedName===c.a.fullyQualifiedName||n.fullyQualifiedName===u.a.fullyQualifiedName||n.fullyQualifiedName===l.a.fullyQualifiedName||n.fullyQualifiedName===g.a.fullyQualifiedName||n.fullyQualifiedName===d.a.fullyQualifiedName||n.fullyQualifiedName===h.a.fullyQualifiedName||n.fullyQualifiedName===f.a.fullyQualifiedName){var p=v.event_data,b=p.event_data,m=p.event_data_schema,_=babelHelpers.objectWithoutProperties(p,["event_data","event_data_schema"]),w=n.propTypes,y=(w.event_data,w.event_data_schema,babelHelpers.objectWithoutProperties(w,["event_data","event_data_schema"]));o=Object(E.a)(y,_);var j=b&&Object.keys(b).length;if(j>0&&!m)o=["Error: Cannot supply event_data to ".concat(r," without an event_data_schema")].concat(babelHelpers.toConsumableArray(o));else if(m){o=[].concat(babelHelpers.toConsumableArray(Object(E.a)(m.propTypes,Object.assign(Object.assign({},m.defaultProps),b))),babelHelpers.toConsumableArray(o));var k=i||t.shouldAutoQueueEvent();0!==o.length||k||(v.event_data.event_data=JSON.stringify(b),v.event_data.event_data_schema=m.fullyQualifiedName)}else 0===j&&(v.event_data.event_data=void 0)}else o=Object(E.a)(n.propTypes,v.event_data);if(o.length>0){"undefined"!=typeof console&&console.error&&o.forEach((function(e){return console.error(e)})),t.airdogBump("di.jitney.logging.invalid_event",1,["schema:".concat(r)]);var x=s.a.defaultProps.schema,C=v.event_data&&v.event_data.context||t.logContext;return C=Object.assign(Object.assign({},{source:"unknown"}),C),{schema:x,event_data:{schema:x,event_schema:r,event_json:JSON.stringify(v.event_data),errors:o.map((function(e){return String(e)})),context:C}}}return v},callback:function(e,n){e||(t.airdogBump("di.jitney.logging.tracking_error",1,["schema:".concat(r)]),t.logEvent({event_name:"jitney_tracking_error",event_data:{schema_name:r,status:n.status,responseText:n.responseText,timeout:n.timeout}}))},queue:i,debounce:!1,use_send_beacon:o})},n.queueJitneyEvent=function(e){var t=e.schema,n=e.event_data;this.logJitneyEvent({schema:t,event_data:n,queue:!0})},n.logEphemeralDebugEvent=function(e){e.debugEventName,e.debugEventData,e.stopPublishingDate,e.queue},n.breakEventsIntoBatches=function(e){var t=this,n=[];if(x.a.getBootstrap("tracking_disable_batch_by_request_size"))return e;var a=0,i=[];return e.forEach((function(e){var o=JSON.stringify(e).length;o>t.BATCH_SIZE_LIMIT?n.push([e]):o+a>t.BATCH_SIZE_LIMIT?(i.length>0&&n.push(i),i=[e],a=o):(i.push(e),a+=o)})),i.length>0&&n.push(i),n},n.flushEventQueue=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.useSendBeacon,i=void 0!==a&&a;try{this.batchedIdleTimeoutId&&("cancelIdleCallback"in e&&e.cancelIdleCallback(this.batchedIdleTimeoutId),this.batchedIdleTimeoutId=0);var o=_()(C)||[];if("string"==typeof o&&(o=JSON.parse(o)),o.length>0){var r=o.map((function(e){return Object.assign(Object.assign({},e),{},{event_data:t.addContextToQueuedEvent(A(e).event_data)})})),s=this.breakEventsIntoBatches(r);s.forEach((function(e){return t.sendTrackingRequest(e,null,{useSendBeacon:i})}))}_()(C,null)}catch(e){Object(j.c)("Could not flush event queue: ".concat(e))}},n.formatEventData=function(e){this.updateDynamicContext();var t={event_name:e.event_name,event_data:Object.assign(Object.assign({},this.logContext),{},{timestamp:Date.now()},e.event_data),trackingjs_logging_version:"0.2"};return e.post_process?e.post_process(t):t},n.addContextToQueuedEvent=function(e){return e.schema?Object.assign(Object.assign({},e),{},{context:Object.assign(Object.assign({},e.context),{},{web:Object.assign(Object.assign({},e.context.web),{},{queued:!0})})}):Object.assign(Object.assign({},e),{},{trackingjs_queued:!0,trackingjs_queued_context:this.logContext})},n.sendTrackingRequest=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.useSendBeacon,i=void 0!==a&&a,o=i||this.isUnloading;this.request(e,0,{useSendBeacon:o}).then((function(){return t&&t(!0)})).catch((function(n){N(e),t&&t(!1,n)})),Object(j.a)()&&_()("log-in-dev")&&(Object(j.b)("--- Tracking.logEvent ---"),Object(j.b)(e))},n.getCookies=function(){var e={},t=document.cookie;if(""===t)return e;for(var n=t.split("; "),a=0;a<n.length;a+=1){var i=n[a],o=i.indexOf("="),r=i.slice(0,o),s=i.slice(o+1);try{s=decodeURIComponent(s)}catch(e){this.logEvent({event_name:"cookie_decode_failed",event_data:{cookie:i}}),s=""}e[r]=s}return e},n.maybeAddCookie=function(e,t,n){null!=e[t]&&this.addContext(babelHelpers.defineProperty({},n||t,e[t]))},n.airdogBump=function(e,t,n,a){var i={};a&&"object"===babelHelpers.typeof(a)&&(i.debounce=a.debounce,i.queue=a.queue),"boolean"==typeof a&&(i.queue=a);var o=Object.assign(Object.assign({},i),{},{event_name:"airdog_bump",event_data:{datadog_key:e,queue:i.queue}});t&&(o.event_data.datadog_count=t),n&&("object"!==babelHelpers.typeof(n)||Array.isArray(n)?o.event_data.datadog_tags=n:o.event_data.datadog_tags=Object.entries(n).map((function(e){var t=babelHelpers.slicedToArray(e,2),n=t[0],a=t[1];return"".concat(n,":").concat(a)})).join(",")),this.logEvent(o)},n.logAirdogEvent=function(e){var t=e.event_data||{};this.logEvent(Object.assign(Object.assign({},e),{},{event_data:Object.assign(Object.assign({},t),{},{datadog_key:t.datadog_key||Object(k.a)(e)})}))},n.setImpressionMetadata=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventDataSchema,n=e.initialEventData,a=void 0===n?{}:n,i=e.impressionUuid;this.pageEventDataSchema=t,this.pageImpressionUuid=i,this.pageEventData=a},n.logUniversalSessionStartEvent=function(e){var t=e.schema,n=e.event_data,a=void 0===n?{}:n;!this.appLoggingContext.web_tab_uuid&&_.a.types.sessionStorage&&(this.appLoggingContext.web_tab_uuid=_.a.sessionStorage(S));var i=!!_.a.types.sessionStorage&&_.a.sessionStorage(I)||[],o=y()(),r={event_data_schema:t,event_data:a,app_logging_context:this.appLoggingContext,web_ancestor_tabs:i.map((function(e){return{web_tab_uuid:e.id,timestamp_ms:e.timestamp}})),uuid:o};return this.logJitneyEvent({schema:f.a,event_data:r}),this.appLoggingContext.active_sessions.push({uuid:o,event_data_schema:t.fullyQualifiedName,event_data:JSON.stringify(a)}),o},n.logUniversalSessionEndEvent=function(e){var t=e.sessionId,n=e.sessionOutcome,a=e.useSendBeacon;if(!t)throw new TypeError("Need to pass a sessionId");var i=this.appLoggingContext.active_sessions.find((function(e){return e.uuid===t}));if(!i)return!1;var o=i.event_data_schema,r=i.event_data,s=!!_.a.types.sessionStorage&&_.a.sessionStorage(I)||[],c={event_data_schema:o,event_data:r,session_outcome:n,app_logging_context:this.appLoggingContext,web_ancestor_tabs:s.map((function(e){return{web_tab_uuid:e.id,timestamp_ms:e.timestamp}})),uuid:i.uuid};return this.logJitneyEvent({schema:v.a,event_data:c,use_send_beacon:a}),this.appLoggingContext.active_sessions=this.appLoggingContext.active_sessions.filter((function(e){return e.uuid!==t})),!0},n.closeAllActiveSessions=function(){var e=this;this.appLoggingContext.active_sessions.forEach((function(t){e.logUniversalSessionEndEvent({sessionId:t.uuid,useSendBeacon:!0})})),window.removeEventListener&&window.removeEventListener("beforeunload",this.closeAllActiveSessions)},t}()}).call(this,n("yLpj"))},RMaf:function(e,t,n){"use strict";function a(e){var t=e.event_data||{};return[e.event_name,t.page,t.section,t.sub_section,t.operation].filter(Boolean).join(".")}n.d(t,"a",(function(){return a}))},Ri7V:function(e,t,n){"use strict";var a=n("T4Uw"),i=n.n(a),o=n("XfPh"),r=null,s={extend:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in r||(r=i.a.get("trebuchet")||{}),e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])},getBootstrap:function(e){return r||(r=i.a.get("trebuchet")||{}),Object(o.a)(r,e)?r[e]:(window.console&&window.console.warn&&window.console.warn("".concat(e," was not bootstrapped")),null)},replaceWith:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=e},clear:function(){r=null}};t.a=s},XfPh:function(e,t,n){"use strict";t.a=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},bPWe:function(e,t,n){"use strict";e.exports=function(e){return String(e).trim()}},g8Fj:function(e,t,n){"use strict";var a=n("tgpT");t.a=a.a},"js+0":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("MjPQ"),i=n.n(a),o=n("VIg1"),r=n("g8Fj");function s(e,t,n){var a;a="string"==typeof e?new Error(e):"error"in e?e.error:"stack"in e?e:new Error(String(e));var s=i.a.parse(a).map((function(e){return{filename:e.fileName||"[unknown]",function_name:e.functionName||"[unknown]",line:e.lineNumber||0,column:e.columnNumber||0}}),i.a);r.a.logJitneyEvent({schema:o.a,event_data:{message:String(a),level:t,fingerprint:n,exceptions:[{type:a.name,message:a.message,stacktrace:{frames:s}}]}})}},ptWw:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("WdOh");function i(e,t){return t.reduce((function(t,n){return Object.assign(Object.assign({},t),{},babelHelpers.defineProperty({},n,e[n]))}),{})}function o(e,t,n){var o=e.event_data,r=o.dimensions||{height:-1,width:-1},s=r.height,c=r.width;return o.affiliate_id=o.affiliate,Object.assign(Object.assign({},e),{},{event_data:Object.assign(Object.assign({context:Object.assign(Object.assign({},i(o,Object.keys(a.a.propTypes))),{},{web:i(o,Object.keys(a.b.propTypes)),screen_height:s,screen_width:c})},t.defaultProps),n)})}},rDjx:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("YejT"),i=n.n(a),o=n("ygK6"),r=n("2jR3"),s=n("yIzj"),c=0,u=new Map;function l(){return!("object"!==babelHelpers.typeof(window.safari)||!window.safari.pushNotification)}function d(){c=0,u&&(u.forEach((function(e,t){!function(e,t){if(window.navigator&&window.navigator.sendBeacon){if(window.navigator.sendBeacon(e,JSON.stringify(t)))return Promise.resolve();var n=new Error("sendTrackingRequest failed to log via sendBeacon for url: ".concat(e));return Object(r.b)(n),Promise.reject(n)}Object(o.a)((function(){return i.a.ajax(e,{type:"POST",contentType:"application/json",data:t}).then((function(e){if(e.status<200||e.status>204)throw new Error("sendTrackingRequest returned via fejax, status code ".concat(e.status))}),(function(e){throw new Error("sendTrackingRequest failed to log via fejax, error: ".concat(e.stack||e))}))}),{retries:4}).catch(r.b)}(t,e)})),u.clear())}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;if(Object(s.a)()||(window.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&d()}),!0),l()&&window.addEventListener("beforeunload",(function(){d()}),!0),Object(s.b)(!0)),u.has(e)){var a=u.get(e);void 0!==a?a.push(t):Object(r.b)(new Error("sendTrackingRequest RequestPayload was undefined for url: ".concat(e)))}else u.set(e,[t]);c||(c=window.requestIdleCallback(d,{timeout:n}))}},tgpT:function(e,t,n){"use strict";var a=n("xk4V"),i=n.n(a),o=n("HYLM"),r=n("CBMP");n("Qu9w");var s=new o.a({logger:{request:function e(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=o.useSendBeacon,s=void 0!==r&&r,c=Array.isArray(t)?t:[t],u=c.filter((function(e){return e.schema})),l=c.filter((function(e){return!e.schema}));if(l.length>0&&u.length>0)return Promise.all([e(l,a,{useSendBeacon:s}),e(u,a,{useSendBeacon:s})]);if(l.length>0)c=l,console.warn("AirEvent has been deprecated, please consider using `logJitneyEvent()` method to report Jitney event.");else{if(!(u.length>0))return Promise.resolve();c=u}if(c[0].schema?(n="/tracking/jitney/logging/messages",c=c.map((function(e){return Object.assign(Object.assign({},e),{},{uuid:e.uuid||i()()})}))):n="/tracking/events",s&&window.navigator&&window.navigator.sendBeacon){var d=window.navigator.sendBeacon(n,JSON.stringify(c));return d?Promise.resolve():Promise.reject()}return new Promise((function(t,i){var o=new XMLHttpRequest;o.open("POST",n),o.setRequestHeader("Content-type","application/json"),o.onload=function(){o.status>=200&&o.status<=204||1223===o.status?t():i({status:o.status,responseText:o.responseText})},o.onerror=function(){i({status:o.status,responseText:o.responseText})},o.timeout=1e4,o.ontimeout=function(){if(a>=3)i({timeout:1e4});else{var n=a+1;e(c.map((function(e){return Object.assign(Object.assign({},e),{},{event_data:Object.assign(Object.assign({},e.event_data),{},{trackingjs_retry_count:n})})})),n).then(t).catch(i)}},o.send(JSON.stringify(c))}))}}});s.addInitHook((function(){return Object(r.a)(s)})),t.a=s},tkLd:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return r}));var a=null;function i(){if(null===a){var t=e.document&&e.document.body&&e.document.body.className;a=/\bdevelopment\b/.test(String(t))}return a}function o(){if("undefined"!=typeof console&&console.log){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Function.apply.call(console.log,console,t)}}function r(){if("undefined"!=typeof console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Function.apply.call(console.warn,console,t)}}}).call(this,n("yLpj"))},vkc8:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return f}));var a,i,o,r,s=n("js+0"),c=!1,u=new Set,l=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/Service Worker with redundant state/,/Failed to register a ServiceWorker/,/Blocked a frame with origin/,/Non-Error exception captured with keys/,/Cannot read property 'closingEls' of undefined/,/window\.widgetContentScriptFunction is not a function/,/MacPlayer is not defined/,/\$skyuc_src is not defined/,/PADDINGXX/,/NS_ERROR_FILE_CORRUPTED/,/NS_ERROR_FILE_NO_DEVICE_SPACE/,/HTMLDocument\.DOMNodeInsertedFunc/,/DOMNodeInsertedByJs/,/'fidoCallback' is undefined/];function d(){var e,t;return i||(i=(e=new Promise((function(e){Promise.all([window._phrasesManifest._getPhrases(["e99e"],"cVPA","4GoT",n),n.e("e99e")]).then(function(t){e(babelHelpers.interopRequireWildcard(n("NlKi")))}.bind(null,n)).catch(n.oe)})),t="raven",e.chunkName=t,e).then((function(e){return e.default||e})).then((function(e){return window.onerror=a,e.config("https://".concat(o||"04fd3e3aec1b469ba48af2b441bc8c76","@").concat(window.location.hostname,"/js-exceptions/").concat(r||81),{captureUnhandledRejections:!1,ignoreErrors:l,ignoreUrls:[/kaspersky-labs\.com/,/\/[A-Z0-9-]{10,}\/main\.js/,/dgnria2-at-nuance-dot-com/,/revsrvr-a\.akamaihd/]}).install(),u.forEach((function(t){t(e)})),u.clear(),e}))),i}function g(e){return i?d().then((function(t){e(t)})):u.add(e),function(){u.delete(e)}}function f(){return c}var v=function(e,t,n,i,o){a&&a.call(window,e,t,n,i,o);var r=String(e);l.some((function(e){return e.test(r)}))||d().then((function(){window.onerror&&window.onerror(e,t,n,i,o)}))};a=window.onerror,window.onerror=v,c=!0,window.addEventListener("error",(function(e){Object(s.a)(e,"fatal")}))},xJNn:function(e,t,n){"use strict";e.exports=function(){}},yIzj:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var a=!1;function i(){return a}function o(e){a=e}},ygK6:function(e,t,n){"use strict";function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.retries,i=void 0===n?1:n,o=t.firstRetryDelayMs,r=void 0===o?1e3:o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return new Promise((function(t,n){e().then(t,(function(o){if(s>i)n(o);else{var c=r*Math.pow(2,s-1);setTimeout((function(){a(e,{retries:i,firstRetryDelayMs:r},s+1).then(t,n)}),c)}}))}))}n.d(t,"a",(function(){return a}))}}]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/8060-0682eb92.js.map